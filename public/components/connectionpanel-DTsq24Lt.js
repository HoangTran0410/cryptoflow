import{r as a,j as e,L as q,c as J,d as Q,e as Z,f as ee,F as te,g as se,h as ae,i as le,k as re}from"../vendor-u8cx4Mps.js";import"../index-DGMj3aU4.js";const x=48,U=5,b=t=>t.length<=14?t:`${t.slice(0,8)}...${t.slice(-4)}`,de=({connection:t,onClose:O})=>{var M,E,R,L,I,H;const[r,g]=a.useState("all"),[c,w]=a.useState(""),[m,T]=a.useState(""),[d,y]=a.useState(""),[i,C]=a.useState(""),[j,P]=a.useState(!1),[u,W]=a.useState("date"),[N,S]=a.useState("desc"),[k,X]=a.useState(0),Y=a.useRef(null),B=s=>{u===s?S(o=>o==="asc"?"desc":"asc"):(W(s),S("desc"))},_=()=>{w(""),T(""),y(""),C("")},D=c||m||d||i,F=({column:s})=>u!==s?e.jsx(ae,{className:"w-3 h-3 opacity-40"}):N==="desc"?e.jsx(le,{className:"w-3 h-3"}):e.jsx(re,{className:"w-3 h-3"}),v=a.useMemo(()=>{var o,p;const s=[];return(r==="all"||r==="forward")&&s.push(...((o=t.aToB)==null?void 0:o.transactions)||[]),(r==="all"||r==="reverse")&&s.push(...((p=t.bToA)==null?void 0:p.transactions)||[]),s},[t,r]),h=a.useMemo(()=>{let s=[...v];const o=parseFloat(c)||0,p=parseFloat(m)||1/0;if(s=s.filter(l=>l.amount>=o&&l.amount<=p),d){const l=new Date(d);l.setHours(0,0,0,0),s=s.filter(n=>n.date>=l)}if(i){const l=new Date(i);l.setHours(23,59,59,999),s=s.filter(n=>n.date<=l)}return s.sort((l,n)=>{let f=0;return u==="date"?f=l.date.getTime()-n.date.getTime():f=l.amount-n.amount,N==="desc"?-f:f}),s},[v,c,m,d,i,u,N]),z=h.length*x,A=Math.max(0,Math.floor(k/x)-U),G=Math.min(h.length,Math.ceil((k+600)/x)+U),$=h.slice(A,G),K=A*x,V=s=>{X(s.currentTarget.scrollTop)};return e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl flex flex-col overflow-hidden h-full",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Connection Details"}),e.jsxs("p",{className:"text-xs text-slate-400",children:[(((M=t.aToB)==null?void 0:M.txCount)||0)+(((E=t.bToA)==null?void 0:E.txCount)||0)," ","transaction",(((R=t.aToB)==null?void 0:R.txCount)||0)+(((L=t.bToA)==null?void 0:L.txCount)||0)!==1?"s":""]})]})]}),e.jsx("button",{onClick:O,className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",title:"Close panel",children:e.jsx(J,{className:"w-4 h-4 text-slate-400"})})]}),t.aToB&&t.bToA?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("div",{className:"flex-1 bg-slate-950 rounded-lg px-3 py-2 border border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Address A"}),e.jsx("span",{className:"text-slate-200 font-mono truncate block copyable","data-copy":t.addressA,children:b(t.addressA)})]}),e.jsx(Q,{className:"w-5 h-5 text-indigo-400 shrink-0"}),e.jsxs("div",{className:"flex-1 bg-slate-950 rounded-lg px-3 py-2 border border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Address B"}),e.jsx("span",{className:"text-slate-200 font-mono truncate block copyable","data-copy":t.addressB,children:b(t.addressB)})]})]}):e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("div",{className:"flex-1 bg-slate-950 rounded-lg px-3 py-2 border border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Source"}),e.jsx("span",{className:"text-slate-200 font-mono truncate block copyable","data-copy":t.aToB?t.aToB.fromAddress:t.bToA.toAddress,children:b(t.aToB?t.aToB.fromAddress:t.bToA.toAddress)})]}),e.jsx(Z,{className:"w-5 h-5 text-orange-400 shrink-0"}),e.jsxs("div",{className:"flex-1 bg-slate-950 rounded-lg px-3 py-2 border border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Target"}),e.jsx("span",{className:"text-slate-200 font-mono truncate block copyable","data-copy":t.aToB?t.aToB.toAddress:t.bToA.fromAddress,children:b(t.aToB?t.aToB.toAddress:t.bToA.fromAddress)})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between bg-slate-950 rounded-lg px-3 py-2 border border-slate-700",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Total Amount"}),e.jsxs("span",{className:"text-lg font-semibold text-orange-400",children:["$",t.totalAmount.toLocaleString()]})]}),t.aToB&&t.bToA&&e.jsxs("div",{className:"mt-3 flex gap-1 bg-slate-950 rounded-lg p-1 border border-slate-700",children:[e.jsxs("button",{onClick:()=>g("all"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded transition-colors ${r==="all"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:["All (",(((I=t.aToB)==null?void 0:I.txCount)||0)+(((H=t.bToA)==null?void 0:H.txCount)||0),")"]}),t.aToB&&e.jsxs("button",{onClick:()=>g("forward"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded transition-colors ${r==="forward"?"bg-orange-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:["A → B (",t.aToB.txCount,")"]}),t.bToA&&e.jsxs("button",{onClick:()=>g("reverse"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded transition-colors ${r==="reverse"?"bg-green-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:["B → A (",t.bToA.txCount,")"]})]})]}),e.jsxs("div",{className:"border-b border-slate-800",children:[e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>P(!j),className:"flex items-center gap-2 text-sm font-medium text-slate-300 hover:text-white transition-colors",children:[e.jsx(ee,{className:`w-4 h-4 transition-transform ${j?"":"-rotate-90"}`}),"Filters",D&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-indigo-600 text-white text-xs rounded",children:"Active"})]}),D&&e.jsxs("button",{onClick:_,className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:"Clear all filters",children:[e.jsx(te,{className:"w-3 h-3"}),"Clear"]})]}),j&&e.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-slate-500 shrink-0"}),e.jsx("input",{type:"date",value:d,onChange:s=>y(s.target.value),className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-2 py-1.5 text-xs text-white focus:outline-none focus:border-indigo-500"}),e.jsx("span",{className:"text-slate-500 text-xs",children:"to"}),e.jsx("input",{type:"date",value:i,onChange:s=>C(s.target.value),className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-2 py-1.5 text-xs text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 text-xs w-4 text-center",children:"$"}),e.jsx("input",{type:"number",placeholder:"Min",value:c,onChange:s=>w(s.target.value),className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-2 py-1.5 text-xs text-white focus:outline-none focus:border-indigo-500"}),e.jsx("span",{className:"text-slate-500 text-xs",children:"to"}),e.jsx("input",{type:"number",placeholder:"Max",value:m,onChange:s=>T(s.target.value),className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-2 py-1.5 text-xs text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{className:"text-xs text-slate-500 text-right",children:["Showing ",h.length," of ",v.length," ","transactions"]})]})]}),e.jsxs("div",{ref:Y,className:"flex-1 overflow-auto",onScroll:V,children:[e.jsx("div",{className:"sticky top-0 bg-slate-900 border-b border-slate-800 z-10",children:e.jsxs("div",{className:"flex text-xs text-slate-400 uppercase",children:[e.jsxs("button",{onClick:()=>B("date"),className:"flex-1 p-2 font-medium flex items-center gap-1 hover:text-slate-200 transition-colors text-left",children:["Date ",e.jsx(F,{column:"date"})]}),e.jsxs("button",{onClick:()=>B("amount"),className:"w-24 p-2 font-medium flex items-center justify-end gap-1 hover:text-slate-200 transition-colors",children:["Amount ",e.jsx(F,{column:"amount"})]})]})}),e.jsx("div",{style:{height:z,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${K}px)`},children:$.length===0?e.jsx("div",{className:"p-4 text-center text-slate-500 text-sm",children:"No transactions match filters"}):$.map((s,o)=>e.jsxs("div",{className:"flex items-center hover:bg-slate-800/50 transition-colors border-b border-slate-800/50",style:{height:x},children:[e.jsxs("div",{className:"flex-1 p-2",children:[e.jsx("span",{className:"text-sm text-slate-200",children:s.date.toLocaleDateString()}),e.jsx("span",{className:"text-xs text-slate-500 ml-2",children:s.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"w-24 p-2 text-right",children:e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:["$",s.amount>=1e3?`${(s.amount/1e3).toFixed(1)}K`:s.amount.toLocaleString()]})})]},s.id||A+o))})})]})]})};export{de as default};
