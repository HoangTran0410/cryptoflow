import{r as n,j as e,I as A,J as S,K as U,w as I,e as W,h as Y,k as H,i as O}from"../vendor-u8cx4Mps.js";import"../index-DGMj3aU4.js";const G=50,P=80,X=x=>{const r=new Map;return x.forEach(l=>{r.has(l.from)||r.set(l.from,{address:l.from,inflow:0,outflow:0,netFlow:0,txCount:0,inflowCount:0,outflowCount:0}),r.has(l.to)||r.set(l.to,{address:l.to,inflow:0,outflow:0,netFlow:0,txCount:0,inflowCount:0,outflowCount:0});const a=r.get(l.from),d=r.get(l.to);a.outflow+=l.amount,a.netFlow-=l.amount,a.txCount+=1,a.outflowCount+=1,d.inflow+=l.amount,d.netFlow+=l.amount,d.txCount+=1,d.inflowCount+=1}),Array.from(r.values()).sort((l,a)=>a.inflow+a.outflow-(l.inflow+l.outflow))},$=(x,r,l)=>{const a=r*l,d=Math.max(0,Math.floor(x/l)-3),y=Math.min(r,Math.ceil((x+800)/l)+3),w=d*l;return{startIndex:d,endIndex:y,offsetY:w,totalHeight:a}},K=({transactions:x})=>{const[r,l]=n.useState("leaderboard"),a=n.useMemo(()=>X(x),[x]),[d,y]=n.useState(0),w=n.useRef(null),[f,R]=n.useState({key:"netFlow",direction:"desc"}),[o,h]=n.useState({address:"",inflow:"",outflow:"",netFlow:"",inflowCount:"",outflowCount:""}),[L,V]=n.useState(0),C=n.useRef(null),[u,F]=n.useState({from:"",to:""});n.useLayoutEffect(()=>{r==="leaderboard"&&w.current?w.current.scrollTop=d:r==="corridors"&&C.current&&(C.current.scrollTop=L)},[r]);const v=n.useMemo(()=>{let t=[...a];return(o.address||o.inflow||o.outflow||o.netFlow||o.inflowCount||o.outflowCount)&&(t=t.filter(s=>{const i=s.address.toLowerCase().includes(o.address.toLowerCase()),c=!o.inflow||s.inflow>Number(o.inflow),m=!o.outflow||s.outflow>Number(o.outflow),D=!o.netFlow||s.netFlow>Number(o.netFlow),E=!o.inflowCount||s.inflowCount>Number(o.inflowCount),_=!o.outflowCount||s.outflowCount>Number(o.outflowCount);return i&&c&&m&&D&&E&&_})),f.key&&t.sort((s,i)=>{const c=s[f.key],m=i[f.key];return c<m?f.direction==="asc"?-1:1:c>m?f.direction==="asc"?1:-1:0}),t},[a,f,o]),N=n.useMemo(()=>{const t=new Map;return x.forEach(s=>{const i=`${s.from}|${s.to}`,c=t.get(i)||{from:s.from,to:s.to,amount:0,count:0};t.set(i,{...c,amount:c.amount+s.amount,count:c.count+1})}),Array.from(t.values()).sort((s,i)=>i.amount-s.amount)},[x]),k=n.useMemo(()=>!u.from&&!u.to?N:N.filter(t=>t.from.toLowerCase().includes(u.from.toLowerCase())&&t.to.toLowerCase().includes(u.to.toLowerCase())),[N,u]),b=$(d,v.length,G),M=v.slice(b.startIndex,b.endIndex),j=$(L,k.length,P),T=k.slice(j.startIndex,j.endIndex),p=t=>{R(s=>({key:t,direction:s.key===t&&s.direction==="desc"?"asc":"desc"}))},g=({col:t})=>f.key!==t?e.jsx(Y,{className:"w-3 h-3 text-slate-600 opacity-50"}):f.direction==="asc"?e.jsx(H,{className:"w-3 h-3 text-indigo-400"}):e.jsx(O,{className:"w-3 h-3 text-indigo-400"});return e.jsxs("div",{className:"flex flex-col h-full gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/20",children:e.jsx(A,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Money Flow Analysis"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Aggregated wallet statistics and transfer corridor rankings"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-slate-900 p-1 rounded-xl border border-slate-800 inline-flex",children:[e.jsxs("button",{onClick:()=>l("leaderboard"),className:`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${r==="leaderboard"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[e.jsx(A,{className:"w-4 h-4"}),"Net Flow Leaderboard"]}),e.jsxs("button",{onClick:()=>l("corridors"),className:`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${r==="corridors"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[e.jsx(S,{className:"w-4 h-4"}),"Top Value Corridors"]})]})}),e.jsxs("div",{className:`bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden flex-col h-[calc(100vh-220px)] animate-in fade-in slide-in-from-bottom-2 duration-300 ${r==="leaderboard"?"flex":"hidden"}`,children:[e.jsx("div",{className:"p-5 border-b border-slate-800 bg-slate-950/50 shrink-0 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-emerald-400"}),"Wallet Volume Rankings"]}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:v.length===a.length?`Showing all ${a.length.toLocaleString()} wallets`:`Found ${v.length} / ${a.length} wallets`})]})}),e.jsx("div",{className:"bg-slate-950 border-b border-slate-800 shrink-0 px-6 py-3",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-12 text-xs uppercase text-slate-500 font-semibold tracking-wider flex items-center h-8",children:"#"}),e.jsxs("div",{className:"flex-[2] space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-1 cursor-pointer group select-none",onClick:()=>p("address"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Wallet Address"}),e.jsx(g,{col:"address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"w-3 h-3 absolute left-2 top-1.5 text-slate-600"}),e.jsx("input",{type:"text",placeholder:"Filter address...",value:o.address,onChange:t=>h(s=>({...s,address:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 pl-7 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700"})]})]}),e.jsxs("div",{className:"w-28 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>p("inflow"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Inflow"}),e.jsx(g,{col:"inflow"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:o.inflow,onChange:t=>h(s=>({...s,inflow:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-20 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>p("inflowCount"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"In TXs"}),e.jsx(g,{col:"inflowCount"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:o.inflowCount,onChange:t=>h(s=>({...s,inflowCount:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-28 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>p("outflow"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Outflow"}),e.jsx(g,{col:"outflow"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:o.outflow,onChange:t=>h(s=>({...s,outflow:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-20 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>p("outflowCount"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Out TXs"}),e.jsx(g,{col:"outflowCount"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:o.outflowCount,onChange:t=>h(s=>({...s,outflowCount:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-32 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>p("netFlow"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Net Flow"}),e.jsx(g,{col:"netFlow"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:o.netFlow,onChange:t=>h(s=>({...s,netFlow:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]})]})}),e.jsx("div",{ref:w,className:"overflow-y-auto flex-1 custom-scrollbar bg-slate-900/20",onScroll:t=>{r==="leaderboard"&&y(t.currentTarget.scrollTop)},children:e.jsx("div",{style:{height:b.totalHeight,position:"relative"},children:e.jsxs("div",{style:{transform:`translateY(${b.offsetY}px)`},children:[M.map((t,s)=>{const i=b.startIndex+s+1;return e.jsxs("div",{className:"flex gap-4 items-center hover:bg-slate-800/40 transition-colors border-b border-slate-800/30 h-[50px] text-sm px-6",children:[e.jsxs("div",{className:"w-12 text-slate-500 font-mono text-xs",children:["#",i]}),e.jsxs("div",{className:"flex-[2] font-mono text-slate-300 truncate flex items-center gap-2",title:t.address,children:[e.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${t.netFlow>0?"bg-emerald-500":"bg-orange-500"}`}),e.jsx("span",{className:"copyable truncate","data-copy":t.address,children:t.address}),(t.address.includes("_")||t.address.includes("Whale"))&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-indigo-900/50 text-indigo-300 border border-indigo-800/50 shrink-0",children:"Entity"})]}),e.jsxs("div",{className:"w-28 text-right text-emerald-500/90 font-mono",children:["+",t.inflow.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsx("div",{className:"w-20 text-right text-slate-400 font-mono text-xs",children:t.inflowCount.toLocaleString()}),e.jsxs("div",{className:"w-28 text-right text-orange-500/90 font-mono",children:["-",t.outflow.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsx("div",{className:"w-20 text-right text-slate-400 font-mono text-xs",children:t.outflowCount.toLocaleString()}),e.jsxs("div",{className:`w-32 text-right font-bold font-mono ${t.netFlow>0?"text-emerald-400":t.netFlow<0?"text-red-400":"text-slate-400"}`,children:[t.netFlow>0?"+":"",t.netFlow.toLocaleString(void 0,{maximumFractionDigits:0})]})]},t.address)}),M.length===0&&e.jsx("div",{className:"p-10 text-center text-slate-500",children:"No wallets match your filters."})]})})})]}),e.jsxs("div",{className:`bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden flex-col h-[calc(100vh-220px)] animate-in fade-in slide-in-from-bottom-2 duration-300 ${r==="corridors"?"flex":"hidden"}`,children:[e.jsxs("div",{className:"p-5 border-b border-slate-800 bg-slate-950/50 shrink-0 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-indigo-400"}),"Top Value Corridors"]}),e.jsxs("p",{className:"text-slate-500 text-xs mt-1",children:["Largest cumulative transfers between pairs (",k.length," ","found)."]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-40",children:[e.jsx("span",{className:"absolute left-2 top-2 text-xs text-slate-500 uppercase font-bold",children:"From:"}),e.jsx("input",{type:"text",value:u.from,onChange:t=>F(s=>({...s,from:t.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg py-1.5 pl-12 pr-3 text-sm text-slate-200 focus:ring-1 focus:ring-indigo-500 outline-none",placeholder:"Address..."})]}),e.jsx(S,{className:"w-4 h-4 text-slate-600"}),e.jsxs("div",{className:"relative flex-1 md:w-40",children:[e.jsx("span",{className:"absolute left-2 top-2 text-xs text-slate-500 uppercase font-bold",children:"To:"}),e.jsx("input",{type:"text",value:u.to,onChange:t=>F(s=>({...s,to:t.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg py-1.5 pl-8 pr-3 text-sm text-slate-200 focus:ring-1 focus:ring-indigo-500 outline-none",placeholder:"Address..."})]}),(u.from||u.to)&&e.jsx("button",{onClick:()=>F({from:"",to:""}),className:"text-slate-500 hover:text-white",title:"Clear filters",children:e.jsx(I,{className:"w-4 h-4"})})]})]}),e.jsx("div",{ref:C,className:"overflow-y-auto flex-1 p-6 custom-scrollbar bg-slate-900/20",onScroll:t=>{r==="corridors"&&V(t.currentTarget.scrollTop)},children:e.jsx("div",{style:{height:j.totalHeight,position:"relative"},children:e.jsxs("div",{style:{transform:`translateY(${j.offsetY}px)`,width:"100%"},children:[T.map((t,s)=>{var m;const i=t.amount/(((m=N[0])==null?void 0:m.amount)||1)*100,c=s+j.startIndex+1;return e.jsxs("div",{className:"relative group p-5 mb-3 bg-slate-950/80 border border-slate-800 rounded-xl hover:border-indigo-500/50 transition-colors h-[72px] flex items-center",children:[e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-12 flex items-center justify-center border-r border-slate-800 bg-slate-900/50 rounded-l-xl text-slate-500 font-mono text-sm",children:["#",c]}),e.jsxs("div",{className:"ml-12 flex items-center justify-between w-full pl-6 pr-2 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-6 w-3/5",children:[e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsx("span",{className:"text-xs text-slate-500 mb-1",children:"From"}),e.jsx("span",{className:"text-sm font-mono text-indigo-300 truncate copyable","data-copy":t.from,title:t.from,children:t.from})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx(S,{className:"w-4 h-4 text-slate-600"}),e.jsxs("div",{className:"text-[10px] text-slate-500 mt-1 whitespace-nowrap",children:[t.count," txns"]})]}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1 text-right",children:[e.jsx("span",{className:"text-xs text-slate-500 mb-1",children:"To"}),e.jsx("span",{className:"text-sm font-mono text-emerald-300 truncate copyable","data-copy":t.to,title:t.to,children:t.to})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-bold text-white tracking-tight",children:[t.amount.toLocaleString(void 0,{maximumFractionDigits:2})," ",e.jsx("span",{className:"text-xs font-normal text-slate-500",children:"USDT"})]})})]}),e.jsx("div",{className:"absolute bottom-0 left-12 right-0 h-0.5 bg-slate-800",children:e.jsx("div",{className:"h-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]",style:{width:`${i}%`}})})]},c)}),T.length===0&&e.jsx("div",{className:"text-center text-slate-500 py-10",children:"No transfer corridors match your search."})]})})})]})]})};export{K as default,X as getWalletFlowStats};
