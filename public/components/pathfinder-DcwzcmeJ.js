const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./loadingspinner-BBxdUFzY.js","../vendor-u8cx4Mps.js","../index-DGMj3aU4.js","../index-Bs_JqdHU.css","./depthslider-SFmw7Rcu.js","./exportbutton-CztkarSI.js","./severitybadge-Ed3Ex3gV.js"])))=>i.map(i=>d[i]);
import{u as D,_ as c,L as o,g as A,b as u,e as T}from"../index-DGMj3aU4.js";import{r,j as e,O as k,n as x,w as j,I as E,Q as L,V as R,W as C}from"../vendor-u8cx4Mps.js";const I=x(()=>c(()=>import("./loadingspinner-BBxdUFzY.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),{fallback:o}),O=x(()=>c(()=>import("./depthslider-SFmw7Rcu.js"),__vite__mapDeps([4,1,2,3]),import.meta.url),{fallback:o}),V=x(()=>c(()=>import("./exportbutton-CztkarSI.js"),__vite__mapDeps([5,1,2,3]),import.meta.url),{fallback:o}),b=x(()=>c(()=>import("./severitybadge-Ed3Ex3gV.js"),__vite__mapDeps([6,1,2,3]),import.meta.url),{fallback:o}),H=({transactions:f})=>{const{executeTask:N,isReady:v}=D(),[i,w]=r.useState(""),[d,y]=r.useState(""),[m,S]=r.useState(10),[l,_]=r.useState(null),[a,h]=r.useState(null),[n,p]=r.useState(!1),P=async()=>{if(!i||!d||!v)return;p(!0);const s=A("pathFinder",{sourceAddress:i,targetAddress:d,maxDepth:m});let t=u.get(s);t||(t=await N({type:"FIND_PATHS",payload:{transactions:f,source:i,target:d,maxDepth:m,maxPaths:100}}),t&&u.set(s,t)),_(t),t&&t.paths.length>0&&h(t.shortestPath),p(!1)},F=s=>{l&&T(l.paths,"paths")},g=s=>s>=80?"critical":s>=60?"high":s>=40?"medium":"low";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/20",children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Path Finder"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Find all paths connecting two addresses"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Source Address"}),e.jsx("input",{type:"text",value:i,onChange:s=>w(s.target.value),placeholder:"Enter source address...",className:"w-full bg-slate-950 border border-slate-700 text-slate-200 px-4 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Target Address"}),e.jsx("input",{type:"text",value:d,onChange:s=>y(s.target.value),placeholder:"Enter target address...",className:"w-full bg-slate-950 border border-slate-700 text-slate-200 px-4 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsx(O,{value:m,onChange:S,min:2,max:15,label:"Maximum Path Depth"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:P,disabled:!i||!d||n,className:"flex-1 px-6 py-3 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),n?"Searching...":"Find Paths"]}),l&&l.paths.length>0&&e.jsx(V,{onExport:F,formats:["csv","json"]})]})]}),n&&e.jsx(I,{message:"Finding paths between addresses..."}),l&&!n&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-1 space-y-4",children:e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Found Paths (",l.statistics.totalPathsFound,")"]}),e.jsxs("p",{className:"text-slate-500 text-xs mb-3",children:["Avg length: ",l.statistics.avgPathLength.toFixed(1)," hops"]}),l.paths.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-slate-400",children:"No paths found"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Try increasing max depth or check addresses"})]}):e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:l.paths.map((s,t)=>e.jsxs("button",{onClick:()=>h(s),className:`w-full text-left p-3 rounded-lg border transition-all ${a===s?"bg-indigo-900/30 border-indigo-500":"bg-slate-800/30 border-slate-700 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-slate-400 text-xs",children:["Path #",t+1]}),s===l.shortestPath&&e.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 text-xs",children:[e.jsx(L,{className:"w-3 h-3 fill-current"}),"Shortest"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-slate-300",children:[s.hops," hops"]}),e.jsx(b,{severity:g(s.suspicionScore),score:Math.round(s.suspicionScore),size:"sm",showIcon:!1})]})]},t))})]})}),e.jsx("div",{className:"lg:col-span-2",children:a?e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Path Details"}),e.jsx(b,{severity:g(a.suspicionScore),score:Math.round(a.suspicionScore)})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Hops"}),e.jsx("p",{className:"text-white text-xl font-bold",children:a.hops})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Total Amount"}),e.jsx("p",{className:"text-white text-xl font-bold",children:a.totalAmount.toLocaleString(void 0,{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Duration"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:[((a.endDate.getTime()-a.startDate.getTime())/(1e3*60*60)).toFixed(0),"h"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Avg Delay"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:[(a.avgDelay/(1e3*60)).toFixed(0),"m"]})]})]}),e.jsxs("div",{className:"bg-slate-950 rounded-lg p-4",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-3",children:"Transaction Flow"}),e.jsx("div",{className:"space-y-2",children:a.addresses.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-900/50 rounded-full flex items-center justify-center border border-indigo-500/30",children:e.jsx("span",{className:"text-indigo-400 text-xs font-bold",children:t})}),e.jsx("div",{className:"flex-1 bg-slate-800/50 rounded px-3 py-2",children:e.jsx("p",{className:"text-slate-300 font-mono text-xs truncate copyable",title:s,"data-copy":s,children:s})}),t<a.addresses.length-1&&e.jsx(R,{className:"w-4 h-4 text-slate-600 flex-shrink-0"})]},t))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm font-semibold mb-3",children:"Transactions"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:a.transactions.map((s,t)=>e.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-slate-500",children:["Transaction #",t+1]}),e.jsxs("span",{className:"text-white font-semibold",children:[s.amount.toLocaleString()," ",s.currency]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx(C,{className:"w-3 h-3"}),s.date.toLocaleString()]})]},t))})]})]}):e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-12 text-center",children:[e.jsx(j,{className:"w-12 h-12 text-slate-700 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"Select a path to view details"})]})})]})]})};export{H as default};
