import{r as n,j as e,I as P,f as Z,J as ee,c as I,K as U,O as te,S as z,e as se,h as le,k as oe,i as ae}from"../vendor-DWEmHMvc.js";import"../index-CodYiM9M.js";const re=50,ne=80,ie=g=>{const a=new Map;return g.forEach(o=>{a.has(o.from)||a.set(o.from,{address:o.from,inflow:0,outflow:0,netFlow:0,txCount:0,inflowCount:0,outflowCount:0}),a.has(o.to)||a.set(o.to,{address:o.to,inflow:0,outflow:0,netFlow:0,txCount:0,inflowCount:0,outflowCount:0});const c=a.get(o.from),x=a.get(o.to);c.outflow+=o.amount,c.netFlow-=o.amount,c.txCount+=1,c.outflowCount+=1,x.inflow+=o.amount,x.netFlow+=o.amount,x.txCount+=1,x.inflowCount+=1}),Array.from(a.values()).sort((o,c)=>c.inflow+c.outflow-(o.inflow+o.outflow))},B=(g,a,o)=>{const c=a*o,x=Math.max(0,Math.floor(g/o)-3),f=Math.min(a,Math.ceil((g+800)/o)+3),k=x*o;return{startIndex:x,endIndex:f,offsetY:k,totalHeight:c}},xe=({transactions:g})=>{const[a,o]=n.useState("leaderboard"),[c,x]=n.useState(""),[f,k]=n.useState(""),[u,_]=n.useState(""),[h,W]=n.useState(""),[y,J]=n.useState(!0),M=n.useMemo(()=>g.filter(t=>{if(c){const s=new Date(c);if(t.date<s)return!1}if(f){const s=new Date(f);if(t.date>s)return!1}if(u&&h){const s=t.date.getHours(),i=t.date.getMinutes(),r=s*60+i,[d,w]=u.split(":").map(Number),[b,$]=h.split(":").map(Number),R=d*60+w,V=b*60+$;if(R>V){if(r<R&&r>V)return!1}else if(r<R||r>V)return!1}else if(u){const s=t.date.getHours(),i=t.date.getMinutes(),r=s*60+i,[d,w]=u.split(":").map(Number),b=d*60+w;if(r<b)return!1}else if(h){const s=t.date.getHours(),i=t.date.getMinutes(),r=s*60+i,[d,w]=h.split(":").map(Number),b=d*60+w;if(r>b)return!1}return!0}),[g,c,f,u,h]),C=n.useMemo(()=>ie(M),[M]),[Y,K]=n.useState(0),D=n.useRef(null),[p,q]=n.useState({key:"netFlow",direction:"desc"}),[l,j]=n.useState({address:"",inflow:"",outflow:"",netFlow:"",inflowCount:"",outflowCount:""}),[O,Q]=n.useState(0),A=n.useRef(null),[m,E]=n.useState({from:"",to:""});n.useLayoutEffect(()=>{a==="leaderboard"&&D.current?D.current.scrollTop=Y:a==="corridors"&&A.current&&(A.current.scrollTop=O)},[a]);const T=n.useMemo(()=>{let t=[...C];return(l.address||l.inflow||l.outflow||l.netFlow||l.inflowCount||l.outflowCount)&&(t=t.filter(s=>{const i=s.address.toLowerCase().includes(l.address.toLowerCase()),r=!l.inflow||s.inflow>Number(l.inflow),d=!l.outflow||s.outflow>Number(l.outflow),w=!l.netFlow||s.netFlow>Number(l.netFlow),b=!l.inflowCount||s.inflowCount>Number(l.inflowCount),$=!l.outflowCount||s.outflowCount>Number(l.outflowCount);return i&&r&&d&&w&&b&&$})),p.key&&t.sort((s,i)=>{const r=s[p.key],d=i[p.key];return r<d?p.direction==="asc"?-1:1:r>d?p.direction==="asc"?1:-1:0}),t},[C,p,l]),L=n.useMemo(()=>{const t=new Map;return M.forEach(s=>{const i=`${s.from}|${s.to}`,r=t.get(i)||{from:s.from,to:s.to,amount:0,count:0};t.set(i,{...r,amount:r.amount+s.amount,count:r.count+1})}),Array.from(t.values()).sort((s,i)=>i.amount-s.amount)},[M]),H=n.useMemo(()=>!m.from&&!m.to?L:L.filter(t=>t.from.toLowerCase().includes(m.from.toLowerCase())&&t.to.toLowerCase().includes(m.to.toLowerCase())),[L,m]),F=B(Y,T.length,re),X=T.slice(F.startIndex,F.endIndex),S=B(O,H.length,ne),G=H.slice(S.startIndex,S.endIndex),v=t=>{q(s=>({key:t,direction:s.key===t&&s.direction==="desc"?"asc":"desc"}))},N=({col:t})=>p.key!==t?e.jsx(le,{className:"w-3 h-3 text-slate-600 opacity-50"}):p.direction==="asc"?e.jsx(oe,{className:"w-3 h-3 text-indigo-400"}):e.jsx(ae,{className:"w-3 h-3 text-indigo-400"});return e.jsxs("div",{className:"flex flex-col h-full gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/20",children:e.jsx(P,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Money Flow Analysis"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Aggregated wallet statistics and transfer corridor rankings"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Date & Time Filters"}),e.jsx("button",{onClick:()=>J(!y),className:"p-1 hover:bg-slate-700 rounded transition-colors",title:y?"Expand filters":"Collapse filters",children:y?e.jsx(Z,{className:"w-4 h-4 text-slate-400"}):e.jsx(ee,{className:"w-4 h-4 text-slate-400"})})]}),!y&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Date Range"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"datetime-local",value:c,onChange:t=>x(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1.5 pr-7 text-xs text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"Start"}),c&&e.jsx(I,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>x("")})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"datetime-local",value:f,onChange:t=>k(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1.5 pr-7 text-xs text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"End"}),f&&e.jsx(I,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>k("")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Time Range (All Days)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"time",value:u,onChange:t=>_(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1.5 pr-7 text-xs text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"Start Time"}),u&&e.jsx(I,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>_("")})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"time",value:h,onChange:t=>W(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1.5 pr-7 text-xs text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"End Time"}),h&&e.jsx(I,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>W("")})]})]})]})]}),y&&(c||f||u||h)&&e.jsxs("div",{className:"text-xs text-indigo-400",children:["Active filters:"," ",[c&&"Date",u&&"Time"].filter(Boolean).join(" + ")]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-slate-900 p-1 rounded-xl border border-slate-800 inline-flex",children:[e.jsxs("button",{onClick:()=>o("leaderboard"),className:`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${a==="leaderboard"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[e.jsx(P,{className:"w-4 h-4"}),"Net Flow Leaderboard"]}),e.jsxs("button",{onClick:()=>o("corridors"),className:`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${a==="corridors"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[e.jsx(U,{className:"w-4 h-4"}),"Top Value Corridors"]})]})}),e.jsxs("div",{className:`bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden flex-col h-[calc(100vh-220px)] animate-in fade-in slide-in-from-bottom-2 duration-300 ${a==="leaderboard"?"flex":"hidden"}`,children:[e.jsx("div",{className:"p-5 border-b border-slate-800 bg-slate-950/50 shrink-0 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-emerald-400"}),"Wallet Volume Rankings"]}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:T.length===C.length?`Showing all ${C.length.toLocaleString()} wallets`:`Found ${T.length} / ${C.length} wallets`})]})}),e.jsx("div",{className:"bg-slate-950 border-b border-slate-800 shrink-0 px-6 py-3",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-12 text-xs uppercase text-slate-500 font-semibold tracking-wider flex items-center h-8",children:"#"}),e.jsxs("div",{className:"flex-[2] space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-1 cursor-pointer group select-none",onClick:()=>v("address"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Wallet Address"}),e.jsx(N,{col:"address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"w-3 h-3 absolute left-2 top-1.5 text-slate-600"}),e.jsx("input",{type:"text",placeholder:"Filter address...",value:l.address,onChange:t=>j(s=>({...s,address:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 pl-7 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700"})]})]}),e.jsxs("div",{className:"w-28 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>v("inflow"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Inflow"}),e.jsx(N,{col:"inflow"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:l.inflow,onChange:t=>j(s=>({...s,inflow:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-20 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>v("inflowCount"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"In TXs"}),e.jsx(N,{col:"inflowCount"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:l.inflowCount,onChange:t=>j(s=>({...s,inflowCount:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-28 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>v("outflow"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Outflow"}),e.jsx(N,{col:"outflow"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:l.outflow,onChange:t=>j(s=>({...s,outflow:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-20 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>v("outflowCount"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Out TXs"}),e.jsx(N,{col:"outflowCount"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:l.outflowCount,onChange:t=>j(s=>({...s,outflowCount:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]}),e.jsxs("div",{className:"w-32 space-y-2 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer group select-none",onClick:()=>v("netFlow"),children:[e.jsx("span",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider group-hover:text-slate-300",children:"Net Flow"}),e.jsx(N,{col:"netFlow"})]}),e.jsx("input",{type:"text",placeholder:"Filter >...",value:l.netFlow,onChange:t=>j(s=>({...s,netFlow:t.target.value})),className:"w-full bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs text-slate-300 focus:border-indigo-500 focus:outline-none placeholder:text-slate-700 text-right"})]})]})}),e.jsx("div",{ref:D,className:"overflow-y-auto flex-1 custom-scrollbar bg-slate-900/20",onScroll:t=>{a==="leaderboard"&&K(t.currentTarget.scrollTop)},children:e.jsx("div",{style:{height:F.totalHeight,position:"relative"},children:e.jsxs("div",{style:{transform:`translateY(${F.offsetY}px)`},children:[X.map((t,s)=>{const i=F.startIndex+s+1;return e.jsxs("div",{className:"flex gap-4 items-center hover:bg-slate-800/40 transition-colors border-b border-slate-800/30 h-[50px] text-sm px-6",children:[e.jsxs("div",{className:"w-12 text-slate-500 font-mono text-xs",children:["#",i]}),e.jsxs("div",{className:"flex-[2] font-mono text-slate-300 truncate flex items-center gap-2",title:t.address,children:[e.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${t.netFlow>0?"bg-emerald-500":"bg-orange-500"}`}),e.jsx("span",{className:"copyable truncate","data-copy":t.address,children:t.address}),(t.address.includes("_")||t.address.includes("Whale"))&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-indigo-900/50 text-indigo-300 border border-indigo-800/50 shrink-0",children:"Entity"})]}),e.jsxs("div",{className:"w-28 text-right text-emerald-500/90 font-mono",children:["+",t.inflow.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsx("div",{className:"w-20 text-right text-slate-400 font-mono text-xs",children:t.inflowCount.toLocaleString()}),e.jsxs("div",{className:"w-28 text-right text-orange-500/90 font-mono",children:["-",t.outflow.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsx("div",{className:"w-20 text-right text-slate-400 font-mono text-xs",children:t.outflowCount.toLocaleString()}),e.jsxs("div",{className:`w-32 text-right font-bold font-mono ${t.netFlow>0?"text-emerald-400":t.netFlow<0?"text-red-400":"text-slate-400"}`,children:[t.netFlow>0?"+":"",t.netFlow.toLocaleString(void 0,{maximumFractionDigits:0})]})]},t.address)}),X.length===0&&e.jsx("div",{className:"p-10 text-center text-slate-500",children:"No wallets match your filters."})]})})})]}),e.jsxs("div",{className:`bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden flex-col h-[calc(100vh-220px)] animate-in fade-in slide-in-from-bottom-2 duration-300 ${a==="corridors"?"flex":"hidden"}`,children:[e.jsxs("div",{className:"p-5 border-b border-slate-800 bg-slate-950/50 shrink-0 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-indigo-400"}),"Top Value Corridors"]}),e.jsxs("p",{className:"text-slate-500 text-xs mt-1",children:["Largest cumulative transfers between pairs (",H.length," ","found)."]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-40",children:[e.jsx("span",{className:"absolute left-2 top-2 text-xs text-slate-500 uppercase font-bold",children:"From:"}),e.jsx("input",{type:"text",value:m.from,onChange:t=>E(s=>({...s,from:t.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg py-1.5 pl-12 pr-3 text-sm text-slate-200 focus:ring-1 focus:ring-indigo-500 outline-none",placeholder:"Address..."})]}),e.jsx(U,{className:"w-4 h-4 text-slate-600"}),e.jsxs("div",{className:"relative flex-1 md:w-40",children:[e.jsx("span",{className:"absolute left-2 top-2 text-xs text-slate-500 uppercase font-bold",children:"To:"}),e.jsx("input",{type:"text",value:m.to,onChange:t=>E(s=>({...s,to:t.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg py-1.5 pl-8 pr-3 text-sm text-slate-200 focus:ring-1 focus:ring-indigo-500 outline-none",placeholder:"Address..."})]}),(m.from||m.to)&&e.jsx("button",{onClick:()=>E({from:"",to:""}),className:"text-slate-500 hover:text-white",title:"Clear filters",children:e.jsx(z,{className:"w-4 h-4"})})]})]}),e.jsx("div",{ref:A,className:"overflow-y-auto flex-1 p-6 custom-scrollbar bg-slate-900/20",onScroll:t=>{a==="corridors"&&Q(t.currentTarget.scrollTop)},children:e.jsx("div",{style:{height:S.totalHeight,position:"relative"},children:e.jsxs("div",{style:{transform:`translateY(${S.offsetY}px)`,width:"100%"},children:[G.map((t,s)=>{var d;const i=t.amount/(((d=L[0])==null?void 0:d.amount)||1)*100,r=s+S.startIndex+1;return e.jsxs("div",{className:"relative group p-5 mb-3 bg-slate-950/80 border border-slate-800 rounded-xl hover:border-indigo-500/50 transition-colors h-[72px] flex items-center",children:[e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-12 flex items-center justify-center border-r border-slate-800 bg-slate-900/50 rounded-l-xl text-slate-500 font-mono text-sm",children:["#",r]}),e.jsxs("div",{className:"ml-12 flex items-center justify-between w-full pl-6 pr-2 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-6 w-3/5",children:[e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsx("span",{className:"text-xs text-slate-500 mb-1",children:"From"}),e.jsx("span",{className:"text-sm font-mono text-indigo-300 truncate copyable","data-copy":t.from,title:t.from,children:t.from})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx(U,{className:"w-4 h-4 text-slate-600"}),e.jsxs("div",{className:"text-[10px] text-slate-500 mt-1 whitespace-nowrap",children:[t.count," txns"]})]}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1 text-right",children:[e.jsx("span",{className:"text-xs text-slate-500 mb-1",children:"To"}),e.jsx("span",{className:"text-sm font-mono text-emerald-300 truncate copyable","data-copy":t.to,title:t.to,children:t.to})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-bold text-white tracking-tight",children:[t.amount.toLocaleString(void 0,{maximumFractionDigits:2})," ",e.jsx("span",{className:"text-xs font-normal text-slate-500",children:"USDT"})]})})]}),e.jsx("div",{className:"absolute bottom-0 left-12 right-0 h-0.5 bg-slate-800",children:e.jsx("div",{className:"h-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]",style:{width:`${i}%`}})})]},r)}),G.length===0&&e.jsx("div",{className:"text-center text-slate-500 py-10",children:"No transfer corridors match your search."})]})})})]})]})};export{xe as default,ie as getWalletFlowStats};
