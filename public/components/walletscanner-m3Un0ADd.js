import{r as a,j as e,ar as le,as as Me,at as Ue,g as Re,au as re,U as ne,m as oe,S as ce,H as ie,av as Ke,aw as ze,ax as _e,J as q,f as B,D as H,ay as Oe,E as J,p as We,i as Ge,k as qe,h as Be}from"../vendor-Cs9IRPBE.js";import{m as He,n as Je,s as Xe,o as Ve,q as Ye,r as Qe,C as de,t as Ze,v,w as es,x as ss,y as ts,z as as,A as ls,B as rs,a as ns}from"../index-KZY9J4_4.js";const xe="cryptoflow_etherscan_api_key",is=({onDataLoaded:X})=>{const[C,he]=a.useState("bsc"),[V,U]=a.useState(""),[S,Y]=a.useState("single-layer"),[R,me]=a.useState(2),[x,ue]=a.useState(()=>typeof window<"u"&&localStorage.getItem(xe)||"");a.useEffect(()=>{x&&localStorage.setItem(xe,x)},[x]);const[pe,Q]=a.useState(!1),[k,A]=a.useState(!1),[T,Z]=a.useState([]),[P,ee]=a.useState(null),[g,se]=a.useState([]),[te,D]=a.useState(null),h=a.useRef(null),[K,ge]=a.useState(!0),[z,be]=a.useState(!0),[E,fe]=a.useState(!1),[j,je]=a.useState(!0),[c,N]=a.useState(null),[_,ae]=a.useState(""),[w,Ne]=a.useState(!1),[O,we]=a.useState(""),[b,W]=a.useState("desc"),[m,$]=a.useState(new Set),[I,ye]=a.useState(""),[F,ve]=a.useState(""),[L,Ce]=a.useState(10),[M,Se]=a.useState(1e3),[y,ke]=a.useState(!0),n=He(V),Ae=s=>{var i;const l=(i=s.target.files)==null?void 0:i[0];if(!l)return;const o=new FileReader;o.onload=d=>{var p;const u=(p=d.target)==null?void 0:p.result;U(u)},o.readAsText(l)},Te=a.useCallback(async()=>{if(!x.trim()){D("Moralis API key required. Get a free key at https://admin.moralis.com/web3apis");return}if(n.length===0){D("Please enter at least one valid address");return}const s=new Je;h.current=s,Q(!0),A(!1),D(null),Z([]),ee(null),se([]);try{let l;const o=d=>{Z(u=>{const p=u.findIndex(t=>t.address===d.address);if(p>=0){const t=[...u];return t[p]=d,t}return[...u,d]})};S==="multi-layer"?l=await Xe(n,x,{chain:C,usdtOnly:y,useCache:j,controller:s,maxLayers:R,fromDate:I||void 0,toDate:F||void 0,maxPages:L||void 0,maxTransactions:M||void 0,onProgress:o,onLayerComplete:(d,u)=>{console.log(`Layer ${d} complete:`,u.length,"addresses")}}):l=await Ve(n,x,{chain:C,usdtOnly:y,useCache:j,controller:s,onProgress:o,fromDate:I||void 0,toDate:F||void 0,maxPages:L||void 0,maxTransactions:M||void 0}),ee(l);const i=Ye(l.allTransactions,n);se(i),l.allTransactions.length>0&&X(l.allTransactions)}catch(l){D(l.message)}finally{Q(!1),A(!1),h.current=null}},[x,n,C,S,R,j,I,F,L,M,y,X]),Pe=a.useCallback(()=>{h.current&&!h.current.isPaused&&(h.current.pause(),A(!0))},[]),De=a.useCallback(()=>{h.current&&h.current.isPaused&&(h.current.resume(),A(!1))},[]),Ee=a.useCallback(()=>{h.current&&(h.current.stop(),A(!1))},[]),$e=s=>s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(2)}K`:s.toFixed(2),G=T.filter(s=>s.status==="success").length,Ie=T.filter(s=>s.status==="error").length,Fe=n.length>0?G/n.length*100:0;return e.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ðŸ” Wallet Scanner"}),e.jsx("p",{className:"text-slate-400",children:"Scan wallet addresses to fetch USDT transactions and trace fund flows"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300",children:["Moralis API Keys",e.jsxs("span",{className:"text-slate-500 font-normal ml-2",children:["(",Qe(x).length," keys)"]}),e.jsxs("a",{href:"https://admin.moralis.com/web3apis",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-indigo-400 hover:text-indigo-300 inline-flex items-center gap-1",children:["Get free key ",e.jsx(le,{className:"w-3 h-3"})]})]}),e.jsx("button",{onClick:()=>Ne(!w),className:"text-slate-400 hover:text-white transition-colors",title:w?"Hide API keys":"Show API keys",children:w?e.jsx(Me,{className:"w-5 h-5"}):e.jsx(Ue,{className:"w-5 h-5"})})]}),e.jsx("textarea",{value:w?x:x.split(`
`).filter(s=>s).map(s=>"************************").join(`
`),disabled:x&&!w,onChange:s=>ue(s.target.value),placeholder:w?`Enter Moralis API keys (one per line)
eyJhbGcixxx...
eyJhbGcixxy...`:"API keys are hidden",rows:3,className:"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none font-mono text-sm resize-y"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"ðŸ”‘ Enter multiple keys (one per line) - auto-rotates on rate limit. Free tier: 40K requests/month per key."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Blockchain"}),e.jsx("select",{value:C,onChange:s=>he(s.target.value),className:"w-full px-4 py-2.5 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 outline-none",children:Object.entries(de).map(([s,l])=>e.jsxs("option",{value:s,children:[l.name," (",l.symbol,")"]},s))}),e.jsxs("div",{className:"flex items-center justify-between mt-3 p-2.5 bg-slate-900/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-white",children:"USDT Only"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Filter for USDT transfers only"})]}),e.jsx("button",{onClick:()=>ke(!y),className:`relative w-12 h-6 rounded-full transition-colors ${y?"bg-emerald-600":"bg-slate-600"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${y?"left-7":"left-1"}`})})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Scan Mode"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Y("single-layer"),className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${S==="single-layer"?"bg-indigo-600 text-white":"bg-slate-900 text-slate-400 hover:bg-slate-800"}`,children:"Single Layer (F1)"}),e.jsx("button",{onClick:()=>Y("multi-layer"),className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${S==="multi-layer"?"bg-indigo-600 text-white":"bg-slate-900 text-slate-400 hover:bg-slate-800"}`,children:"Multi Layer (F1â†’F2â†’...)"})]}),S==="multi-layer"&&e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Max layers:"}),e.jsx("input",{type:"number",min:2,max:5,value:R,onChange:s=>me(parseInt(s.target.value)||2),className:"w-20 px-3 py-1.5 bg-slate-900 border border-slate-700 rounded-lg text-white text-center"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2 flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Date & Time Range (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"From Date & Time"}),e.jsx("input",{type:"datetime-local",value:I,onChange:s=>ye(s.target.value),step:"1",className:"w-full px-4 py-2.5 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"To Date & Time"}),e.jsx("input",{type:"datetime-local",value:F,onChange:s=>ve(s.target.value),step:"1",className:"w-full px-4 py-2.5 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-slate-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Max Pages per Wallet"}),e.jsx("input",{type:"number",min:1,max:100,value:L,onChange:s=>Ce(parseInt(s.target.value)||10),className:"w-full px-4 py-2.5 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Max Transactions per Wallet"}),e.jsx("input",{type:"number",min:100,max:1e4,step:100,value:M,onChange:s=>Se(parseInt(s.target.value)||1e3),className:"w-full px-4 py-2.5 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 outline-none"})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"ðŸ“… Date range: leave empty to fetch most recent. ðŸ“Š Limits: each page = 100 tx max."})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300",children:["Wallet Addresses (",n.length," valid)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{const s=n.join(`
`);U(s)},className:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg flex items-center gap-2 transition-colors",title:"Parse and remove duplicates",children:[e.jsx(re,{className:"w-4 h-4"}),"Clean (",n.length,")"]}),e.jsxs("label",{className:"cursor-pointer px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 text-sm rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(ne,{className:"w-4 h-4"}),"Upload TXT",e.jsx("input",{type:"file",accept:".txt,.csv",onChange:Ae,className:"hidden"})]})]})]}),e.jsx("textarea",{value:V,onChange:s=>U(s.target.value),placeholder:`Paste wallet addresses here (one per line)
0x1234...
0x5678...
0xabcd...`,rows:8,className:"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none font-mono text-sm resize-y"})]}),te&&e.jsxs("div",{className:"p-4 bg-red-900/30 border border-red-800/50 rounded-xl flex items-center gap-3 text-red-200",children:[e.jsx(oe,{className:"w-5 h-5 shrink-0"}),e.jsx("span",{children:te})]}),e.jsx("div",{className:"flex gap-3",children:pe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 py-4 rounded-xl bg-slate-700 text-white font-semibold text-lg flex items-center justify-center gap-3",children:[e.jsx(ie,{className:`w-5 h-5 ${k?"":"animate-spin"}`}),k?"Paused":"Scanning..."," (",G,"/",n.length,")"]}),e.jsx("button",{onClick:k?De:Pe,className:`px-6 py-4 rounded-xl font-semibold flex items-center gap-2 transition-all ${k?"bg-emerald-600 hover:bg-emerald-500 text-white":"bg-amber-600 hover:bg-amber-500 text-white"}`,children:k?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-5 h-5"}),"Resume"]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5"}),"Pause"]})}),e.jsxs("button",{onClick:Ee,className:"px-6 py-4 rounded-xl font-semibold bg-red-600 hover:bg-red-500 text-white flex items-center gap-2 transition-all",children:[e.jsx(_e,{className:"w-5 h-5"}),"Stop"]})]}):e.jsxs("button",{onClick:Te,disabled:n.length===0,className:`flex-1 py-4 rounded-xl font-semibold text-lg flex items-center justify-center gap-3 transition-all ${n.length===0?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-500 hover:to-purple-500 shadow-lg shadow-indigo-500/25"}`,children:[e.jsx(ce,{className:"w-5 h-5"}),"Start Scanning"," ",n.length>0&&`(${n.length} addresses)`]})}),T.length>0&&e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>ge(!K),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-white",children:"Scan Progress"}),e.jsxs("span",{className:"text-sm text-slate-400",children:[G," success, ",Ie," errors"]})]}),K?e.jsx(q,{className:"w-5 h-5 text-slate-400"}):e.jsx(B,{className:"w-5 h-5 text-slate-400"})]}),K&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsx("div",{className:"h-2 bg-slate-900 rounded-full overflow-hidden mb-4",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-300",style:{width:`${Fe}%`}})}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:T.slice(-50).map(s=>e.jsxs("div",{className:"flex items-center gap-3 py-1.5 text-sm",children:[s.status==="loading"&&e.jsx(ie,{className:"w-4 h-4 text-indigo-400 animate-spin"}),s.status==="success"&&e.jsx(re,{className:"w-4 h-4 text-emerald-400"}),s.status==="error"&&e.jsx(oe,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"font-mono text-slate-300 truncate flex-1",children:s.address}),s.status==="success"&&e.jsxs("span",{className:"text-slate-500",children:[s.transactions.length," tx"]}),s.status==="error"&&e.jsx("span",{className:"text-red-400 text-xs",children:s.error})]},s.address))})]})]}),g.length>0&&e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>be(!z),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-white",children:"ðŸŽ¯ Layer 2 Destinations"}),e.jsxs("span",{className:"text-sm text-emerald-400",children:[g.length," wallets found"]})]}),z?e.jsx(q,{className:"w-5 h-5 text-slate-400"}):e.jsx(B,{className:"w-5 h-5 text-slate-400"})]}),z&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsx("div",{className:"flex justify-end mb-3",children:e.jsxs("button",{onClick:()=>Ze(g,"layer2_destinations.csv"),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 text-sm rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(H,{className:"w-4 h-4"}),"Export CSV"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-slate-400 border-b border-slate-700",children:[e.jsx("th",{className:"pb-2 pr-4",children:"#"}),e.jsx("th",{className:"pb-2 pr-4",children:"Address"}),e.jsx("th",{className:"pb-2 pr-4 text-right",children:"Total Received"}),e.jsx("th",{className:"pb-2 pr-4 text-right",children:"TX Count"}),e.jsx("th",{className:"pb-2 text-right",children:"Sources"})]})}),e.jsx("tbody",{children:g.slice(0,20).map((s,l)=>e.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-700/30",children:[e.jsx("td",{className:"py-2 pr-4 text-slate-500",children:l+1}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("a",{href:`${de[C].explorerUrl}/address/${s.address}`,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-indigo-400 hover:text-indigo-300 flex items-center gap-1",children:[s.address.slice(0,10),"...",s.address.slice(-8),e.jsx(le,{className:"w-3 h-3"})]})}),e.jsxs("td",{className:"py-2 pr-4 text-right text-emerald-400 font-medium",children:[$e(s.totalReceived)," USDT"]}),e.jsx("td",{className:"py-2 pr-4 text-right text-slate-300",children:s.incomingTxCount}),e.jsx("td",{className:"py-2 text-right text-slate-400",children:s.sourceAddresses.size})]},s.address))})]})}),g.length>20&&e.jsxs("p",{className:"text-center text-slate-500 mt-3 text-sm",children:["Showing top 20 of ",g.length," destinations"]})]})]}),P&&e.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/30 to-indigo-900/30 rounded-xl p-6 border border-emerald-800/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"âœ… Scan Complete"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Addresses Scanned"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:P.successCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-400",children:P.allTransactions.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Layer 2 Destinations"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:g.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:P.errorCount})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsxs("button",{onClick:async()=>{if(fe(!E),!E){const s=await v();N(s)}},className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"font-medium text-white",children:"Cache Manager"}),c&&e.jsxs("span",{className:"text-sm text-slate-400",children:[c.totalEntries," entries (",c.totalSize,")"]})]}),E?e.jsx(q,{className:"w-5 h-5 text-slate-400"}):e.jsx(B,{className:"w-5 h-5 text-slate-400"})]}),E&&e.jsxs("div",{className:"px-6 pb-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"Use Cache"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Skip API calls for cached addresses"})]}),e.jsx("button",{onClick:()=>je(!j),className:`relative w-12 h-6 rounded-full transition-colors ${j?"bg-indigo-600":"bg-slate-600"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${j?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:_,onChange:s=>ae(s.target.value),placeholder:"Enter address to clear cache...",className:"flex-1 px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white text-sm placeholder-slate-500 focus:border-indigo-500 outline-none font-mono"}),e.jsxs("button",{onClick:async()=>{if(_.trim()){const s=await es(_.trim());ae("");const l=await v();N(l),alert(`Cleared ${s} cache entries for this address`)}},className:"px-3 py-2 bg-orange-600 hover:bg-orange-500 text-white text-sm rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(J,{className:"w-4 h-4"}),"Clear"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:async()=>{try{await ss()}catch(s){alert("Failed to export cache: "+s.message)}},disabled:!c||c.totalEntries===0,className:`flex-1 px-3 py-2 text-sm rounded-lg flex items-center justify-center gap-2 transition-colors ${!c||c.totalEntries===0?"bg-slate-700 text-slate-500 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:[e.jsx(H,{className:"w-4 h-4"}),"Export Cache"]}),e.jsxs("label",{className:"flex-1 px-3 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm rounded-lg flex items-center justify-center gap-2 transition-colors cursor-pointer",children:[e.jsx(ne,{className:"w-4 h-4"}),"Import Cache",e.jsx("input",{type:"file",accept:".json",onChange:async s=>{var o;const l=(o=s.target.files)==null?void 0:o[0];if(l)try{const i=await ts(l),d=await v();N(d),alert(`Import complete!
âœ“ Imported: ${i.imported}
â­ Skipped: ${i.skipped}
âœ— Errors: ${i.errors}`)}catch(i){alert("Failed to import cache: "+i.message)}s.target.value=""},className:"hidden"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:async()=>{const s=await v();N(s)},className:"flex-1 px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 text-sm rounded-lg flex items-center justify-center gap-2 transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),"Refresh Stats"]}),e.jsxs("button",{onClick:async()=>{if(confirm("Clear all cached data? This cannot be undone.")){await as();const s=await v();N(s)}},className:"flex-1 px-3 py-2 bg-red-600 hover:bg-red-500 text-white text-sm rounded-lg flex items-center justify-center gap-2 transition-colors",children:[e.jsx(J,{className:"w-4 h-4"}),"Clear All Cache"]})]}),c&&c.entries.length>0&&(()=>{const s=t=>`${t.address}-${t.chain}-${t.tokenContract}`,o=[...c.entries.filter(t=>{if(!O.trim())return!0;const r=O.toLowerCase();return t.address.toLowerCase().includes(r)||t.chain.toLowerCase().includes(r)})].sort((t,r)=>b==="asc"?t.txCount-r.txCount:b==="desc"?r.txCount-t.txCount:0),i=o.length>0&&o.every(t=>m.has(s(t))),d=t=>{const r=s(t),f=new Set(m);f.has(r)?f.delete(r):f.add(r),$(f)},u=()=>{if(i)$(new Set);else{const t=new Set;o.forEach(r=>t.add(s(r))),$(t)}},p=()=>o.filter(t=>m.has(s(t)));return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ce,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{type:"text",value:O,onChange:t=>we(t.target.value),placeholder:"Search by address or chain...",className:"w-full pl-9 pr-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white text-sm placeholder-slate-500 focus:border-indigo-500 outline-none"})]}),m.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:async()=>{const t=p();if(t.length>0)try{await ls(t)}catch(r){alert("Failed to export: "+r.message)}},className:"px-3 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:[e.jsx(H,{className:"w-4 h-4"}),"Export (",m.size,")"]}),e.jsxs("button",{onClick:async()=>{const t=p();if(t.length>0&&confirm(`Delete ${t.length} selected cache entries?`)){await rs(t),$(new Set);const r=await v();N(r)}},className:"px-3 py-2 bg-red-600 hover:bg-red-500 text-white text-sm rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:[e.jsx(J,{className:"w-4 h-4"}),"Delete (",m.size,")"]})]})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-slate-800",children:e.jsxs("tr",{className:"text-left text-slate-400 border-b border-slate-700",children:[e.jsx("th",{className:"pb-2 pr-2 w-8",children:e.jsx("input",{type:"checkbox",checked:i,onChange:u,className:"w-4 h-4 rounded border-slate-600 bg-slate-900 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0 cursor-pointer"})}),e.jsx("th",{className:"pb-2 pr-4",children:"Address"}),e.jsx("th",{className:"pb-2 pr-4",children:"Chain"}),e.jsx("th",{className:"pb-2 pr-4 text-right",children:e.jsxs("button",{onClick:()=>{W(b==="desc"?"asc":b==="asc"?null:"desc")},className:"inline-flex items-center gap-1 hover:text-white transition-colors",children:["TX",b==="desc"&&e.jsx(Ge,{className:"w-3 h-3"}),b==="asc"&&e.jsx(qe,{className:"w-3 h-3"}),b===null&&e.jsx(Be,{className:"w-3 h-3"})]})}),e.jsx("th",{className:"pb-2 text-right",children:"Cached"})]})}),e.jsx("tbody",{children:o.map(t=>{const r=s(t),f=m.has(r);return e.jsxs("tr",{className:`border-b border-slate-800 cursor-pointer transition-colors ${f?"bg-indigo-900/30":"hover:bg-slate-700/30"}`,onClick:()=>d(t),children:[e.jsx("td",{className:"py-2 pr-2",children:e.jsx("input",{type:"checkbox",checked:f,onChange:()=>d(t),onClick:Le=>Le.stopPropagation(),className:"w-4 h-4 rounded border-slate-600 bg-slate-900 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0 cursor-pointer"})}),e.jsx("td",{className:"py-2 pr-4 font-mono text-slate-300",children:e.jsx("span",{className:"copyable","data-copy":t.address,children:ns(t.address)})}),e.jsx("td",{className:"py-2 pr-4 text-slate-400",children:t.chain.toUpperCase()}),e.jsx("td",{className:"py-2 pr-4 text-right text-indigo-400",children:t.txCount}),e.jsx("td",{className:"py-2 text-right text-slate-500 text-xs",children:t.cachedAt.toLocaleDateString()})]},r)})})]})}),e.jsxs("p",{className:"text-xs text-slate-500 text-center",children:["Showing ",o.length," of"," ",c.entries.length," entries",m.size>0&&` â€¢ ${m.size} selected`]})]})})(),c&&c.entries.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-4",children:"No cached data"})]})]})]})};export{is as W};
