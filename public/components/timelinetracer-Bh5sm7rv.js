import{r as c,t as z,a9 as $,aa as C,ab as D,a6 as R,ac as I,ad as b,j as e,g as m,S as L,ae as F,af as B,s as j,I as G,ag as M}from"../vendor-DWEmHMvc.js";import{d as U}from"../index-CodYiM9M.js";const J=({transactions:u,initialAddress:v=""})=>{const d=c.useRef(null),[n,N]=c.useState(v),[r,y]=c.useState([]),[a,g]=c.useState(null),w=()=>{if(!n)return;const t=U(u,n);y(t),g(t.length>0?t[0]:null)};c.useEffect(()=>{r.length>0&&d.current&&A()},[r]);const A=()=>{if(!d.current||r.length===0)return;const t={top:40,right:40,bottom:60,left:40},l=1200-t.left-t.right,i=300-t.top-t.bottom,o=z(d.current);o.selectAll("*").remove();const x=o.append("g").attr("transform",`translate(${t.left},${t.top})`),h=$().domain(C(r,s=>s.timestamp)).range([0,l]),p=D().domain([0,R(r,s=>s.amount)||1]).range([i,0]);x.append("g").attr("transform",`translate(0,${i})`).call(I(h).ticks(8)).attr("color","#64748b").selectAll("text").attr("fill","#94a3b8"),x.append("g").call(b(p).ticks(5)).attr("color","#64748b").selectAll("text").attr("fill","#94a3b8");const T={transfer:"#6366f1",aggregation:"#10b981",split:"#f59e0b",spike:"#ef4444",dormant:"#64748b"},S={transfer:"●",aggregation:"▼",split:"▲",spike:"★",dormant:"○"},f=x.selectAll(".event").data(r).enter().append("g").attr("class","event").attr("transform",s=>`translate(${h(s.timestamp)},${p(s.amount)})`).style("cursor","pointer").on("click",(s,E)=>g(E));f.append("circle").attr("r",s=>3+s.significance*5).attr("fill",s=>T[s.type]).attr("stroke","#fff").attr("stroke-width",2).attr("opacity",.8),f.append("text").attr("y",-10).attr("text-anchor","middle").attr("fill","#e2e8f0").attr("font-size","16px").text(s=>S[s.type]),x.append("g").attr("class","grid").attr("opacity",.1).call(b(p).ticks(5).tickSize(-l).tickFormat(()=>"")),o.append("text").attr("x",l/2+t.left).attr("y",i+t.top+50).attr("text-anchor","middle").attr("fill","#94a3b8").attr("font-size","12px").text("Date"),o.append("text").attr("transform","rotate(-90)").attr("x",-140).attr("y",15).attr("text-anchor","middle").attr("fill","#94a3b8").attr("font-size","12px").text("Amount")},k=t=>({transfer:j,aggregation:M,split:G,spike:j,dormant:B})[t];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center shadow-lg shadow-orange-500/20",children:e.jsx(m,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Timeline Tracer"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Chronological fund movement analysis"})]})]}),e.jsx("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 space-y-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(L,{className:"w-4 h-4 inline mr-1"}),"Address to Analyze"]}),e.jsx("input",{type:"text",value:n,onChange:t=>N(t.target.value),placeholder:"Enter wallet address...",className:"w-full bg-slate-950 border border-slate-700 text-slate-200 px-4 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:w,disabled:!n,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Analyze Timeline"]})})]})}),r.length>0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Activity Timeline"}),e.jsx("svg",{ref:d,className:"w-full",style:{height:"300px"}})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[e.jsx("p",{className:"text-slate-400 text-sm font-semibold mb-3",children:"Event Types"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[{type:"transfer",label:"Transfer",color:"bg-indigo-500"},{type:"aggregation",label:"Aggregation",color:"bg-emerald-500"},{type:"split",label:"Split",color:"bg-orange-500"},{type:"spike",label:"Spike",color:"bg-red-500"},{type:"dormant",label:"Dormant",color:"bg-slate-500"}].map(({type:t,label:l,color:i})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${i}`}),e.jsx("span",{className:"text-slate-300 text-xs",children:l})]},t))})]})]}),e.jsx("div",{className:"lg:col-span-1",children:a?e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 space-y-4 sticky top-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Event Details"}),F.createElement(k(a.type),{className:"w-5 h-5 text-indigo-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Type"}),e.jsx("p",{className:"text-white capitalize",children:a.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Date"}),e.jsx("p",{className:"text-white text-sm",children:a.timestamp.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Amount"}),e.jsx("p",{className:"text-white text-xl font-bold",children:a.amount.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Significance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-slate-800 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-500 h-full rounded-full transition-all",style:{width:`${a.significance*100}%`}})}),e.jsxs("span",{className:"text-white text-xs font-semibold",children:[(a.significance*100).toFixed(0),"%"]})]})]}),a.relatedAddresses.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-500 text-xs mb-2",children:["Related Addresses (",a.relatedAddresses.length,")"]}),e.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:[a.relatedAddresses.slice(0,10).map((t,l)=>e.jsx("div",{className:"bg-slate-800/50 rounded px-2 py-1 font-mono text-xs text-slate-300 truncate copyable","data-copy":t,children:t},l)),a.relatedAddresses.length>10&&e.jsxs("p",{className:"text-slate-500 text-xs text-center py-1",children:["+",a.relatedAddresses.length-10," more"]})]})]})]})]}):e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-12 text-center",children:[e.jsx(m,{className:"w-12 h-12 text-slate-700 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"Click an event on the timeline"})]})})]}),!n&&e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-12 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-300 text-lg mb-2",children:"Timeline Analysis"}),e.jsx("p",{className:"text-slate-500",children:"Enter an address to view chronological transaction activity"})]})]})};export{J as default};
