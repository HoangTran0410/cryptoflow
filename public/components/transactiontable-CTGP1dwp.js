import{r as a,j as e,ah as ee,f as _,J as W,c,S as G}from"../vendor-Cs9IRPBE.js";import{a as O}from"../index-KZY9J4_4.js";const C=48,te=600,re=({showHeader:Y=!0,transactions:M})=>{const[u,B]=a.useState("date"),[m,k]=a.useState("desc"),[h,F]=a.useState(""),[p,H]=a.useState(""),[f,D]=a.useState(""),[N,J]=a.useState("gt"),[i,E]=a.useState(""),[d,I]=a.useState(""),[l,L]=a.useState(""),[n,A]=a.useState(""),[b,P]=a.useState(!0),[R,U]=a.useState(0),X=a.useRef(null),y=t=>{t===u?k(m==="asc"?"desc":"asc"):(B(t),k("desc"))},x=a.useMemo(()=>M.filter(t=>{if(h&&!t.from.toLowerCase().includes(h.toLowerCase())||p&&!t.to.toLowerCase().includes(p.toLowerCase()))return!1;if(f){const s=parseFloat(f);if(!isNaN(s)&&(N==="gt"&&t.amount<=s||N==="lt"&&t.amount>=s))return!1}if(i){const s=new Date(i);if(t.date<s)return!1}if(d){const s=new Date(d);if(t.date>s)return!1}if(l&&n){const s=t.date.getHours(),o=t.date.getMinutes(),r=s*60+o,[g,v]=l.split(":").map(Number),[j,Q]=n.split(":").map(Number),S=g*60+v,T=j*60+Q;if(S>T){if(r<S&&r>T)return!1}else if(r<S||r>T)return!1}else if(l){const s=t.date.getHours(),o=t.date.getMinutes(),r=s*60+o,[g,v]=l.split(":").map(Number),j=g*60+v;if(r<j)return!1}else if(n){const s=t.date.getHours(),o=t.date.getMinutes(),r=s*60+o,[g,v]=n.split(":").map(Number),j=g*60+v;if(r>j)return!1}return!0}).sort((t,s)=>{const o=t[u],r=s[u];return o===void 0?1:r===void 0?-1:o<r?m==="asc"?-1:1:o>r?m==="asc"?1:-1:0}),[M,u,m,h,p,f,N,i,d,l,n]),Z=x.length*C,V=Math.max(0,Math.floor(R/C)-5),$=Math.min(x.length,Math.ceil((R+te)/C)+5),q=x.slice(V,$),z=V*C,w=({field:t})=>u!==t?e.jsx("div",{className:"w-4 h-4 opacity-0"}):m==="asc"?e.jsx(W,{className:"w-4 h-4"}):e.jsx(_,{className:"w-4 h-4"}),K=t=>{U(t.currentTarget.scrollTop)};return e.jsxs("div",{className:"flex flex-col h-full max-h-[calc(100vh-100px)] gap-4",children:[Y&&e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-500/20",children:e.jsx(ee,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Transactions"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Full history of all processed transactions"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden flex flex-col h-full",children:[e.jsx("div",{className:"p-5 border-b border-slate-800 flex flex-col md:flex-row justify-between md:items-center gap-4 shrink-0",children:e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Total (",x.length.toLocaleString(),")"]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-950/50 text-slate-200 font-medium uppercase text-xs border-b border-slate-800 flex shrink-0 pr-4",children:[e.jsxs("div",{className:"flex-[2] px-4 py-3 border-r border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 cursor-pointer hover:text-white",onClick:()=>y("date"),children:["Date ",e.jsx(w,{field:"date"})]}),e.jsx("button",{onClick:()=>P(!b),className:"p-0.5 hover:bg-slate-700 rounded transition-colors",title:b?"Expand filters":"Collapse filters",children:b?e.jsx(_,{className:"w-3 h-3"}):e.jsx(W,{className:"w-3 h-3"})})]}),!b&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:i,onChange:t=>E(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-1 py-1 pr-6 text-[10px] text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"Start"}),i&&e.jsx(c,{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>E("")})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:d,onChange:t=>I(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-1 py-1 pr-6 text-[10px] text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"End"}),d&&e.jsx(c,{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>I("")})]})]}),e.jsx("div",{className:"text-[9px] text-slate-500 mb-0.5",children:"Time Range (All Days)"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:l,onChange:t=>L(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-1 py-1 pr-6 text-[10px] text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"Start Time"}),l&&e.jsx(c,{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>L("")})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:n,onChange:t=>A(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-1 py-1 pr-6 text-[10px] text-slate-300 focus:outline-none focus:border-indigo-500",placeholder:"End Time"}),n&&e.jsx(c,{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>A("")})]})]})]}),b&&(i||d||l||n)&&e.jsxs("div",{className:"text-[9px] text-indigo-400 mt-1",children:[[i&&"Date",l&&"Time"].filter(Boolean).join(" + ")," ","filtered"]})]}),e.jsxs("div",{className:"flex-[2] px-4 py-3 border-r border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-1 cursor-pointer hover:text-white mb-2",onClick:()=>y("from"),children:["From ",e.jsx(w,{field:"from"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-2 top-1.5 w-3 h-3 text-slate-500"}),e.jsx("input",{type:"text",value:h,onChange:t=>F(t.target.value),placeholder:"Filter address...",className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 pl-6 pr-6 text-xs text-slate-300 focus:outline-none focus:border-indigo-500"}),h&&e.jsx(c,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>F("")})]})]}),e.jsxs("div",{className:"flex-[2] px-4 py-3 border-r border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-1 cursor-pointer hover:text-white mb-2",onClick:()=>y("to"),children:["To ",e.jsx(w,{field:"to"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-2 top-1.5 w-3 h-3 text-slate-500"}),e.jsx("input",{type:"text",value:p,onChange:t=>H(t.target.value),placeholder:"Filter address...",className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 pl-6 pr-6 text-xs text-slate-300 focus:outline-none focus:border-indigo-500"}),p&&e.jsx(c,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>H("")})]})]}),e.jsxs("div",{className:"flex-1 px-4 py-3 border-r border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 cursor-pointer hover:text-white mb-2",onClick:()=>y("amount"),children:["Amount ",e.jsx(w,{field:"amount"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("select",{value:N,onChange:t=>J(t.target.value),className:"bg-slate-900 border border-slate-700 rounded px-1 py-1 text-[10px] text-slate-300 focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"gt",children:">"}),e.jsx("option",{value:"lt",children:"<"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"number",value:f,onChange:t=>D(t.target.value),placeholder:"Value...",className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 pr-6 text-xs text-slate-300 focus:outline-none focus:border-indigo-500 text-right"}),f&&e.jsx(c,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 hover:text-slate-300 cursor-pointer",onClick:()=>D("")})]})]})]}),e.jsx("div",{className:"flex-1 px-4 py-3 text-right flex items-center justify-end",children:"Currency"})]}),e.jsxs("div",{ref:X,className:"overflow-y-auto flex-1 custom-scrollbar relative",onScroll:K,children:[e.jsx("div",{style:{height:Z,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${z}px)`},children:q.map(t=>e.jsxs("div",{className:"flex border-b border-slate-800/30 hover:bg-slate-800/30 transition-colors h-[48px] items-center text-sm",children:[e.jsx("div",{className:"flex-[2] px-4 whitespace-nowrap text-slate-300",children:t.date.toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:"Asia/Ho_Chi_Minh"})}),e.jsx("div",{className:"flex-[2] px-4 truncate",title:t.from,children:e.jsx("span",{className:"px-2 py-1 rounded text-xs font-mono bg-slate-800 border border-slate-700 text-slate-300 copyable","data-copy":t.from,children:O(t.from)})}),e.jsx("div",{className:"flex-[2] px-4 truncate",title:t.to,children:e.jsx("span",{className:"px-2 py-1 rounded text-xs font-mono bg-slate-800 border border-slate-700 text-slate-300 copyable","data-copy":t.to,children:O(t.to)})}),e.jsx("div",{className:"flex-1 px-4 text-right font-medium text-emerald-400",children:t.amount.toLocaleString()}),e.jsx("div",{className:"flex-1 px-4 text-right text-slate-500",children:t.currency})]},t.id))})}),x.length===0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-500",children:"No transactions found matching your filter."})]})]}),e.jsxs("div",{className:"p-3 text-center text-xs text-slate-500 border-t border-slate-800 shrink-0 bg-slate-900",children:["Showing ",x.length.toLocaleString()," transactions"]})]})]})};export{re as default};
